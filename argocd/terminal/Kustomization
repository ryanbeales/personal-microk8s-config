# Patch to enable web terminal
# https://argo-cd.readthedocs.io/en/stable/operator-manual/web_based_terminal/
apiVersion: kustomize.config.k8s.io/v1alpha1
kind: Component
patchesJson6902:
  - target:
      version: v1
      kind: ConfigMap
      name: argocd-cm
    patch: |-
      - op: add
        path: /data
        value:
          exec.enabled: 'true'
  - target:
      group: rbac.authorization.k8s.io
      version: v1
      kind: ClusterRole
      name: argocd-server
    patch: |-
      - op: add
        path: /rules/0
        value:
          apiGroups:
            - ''
          resources:
            - pods/exec
          verbs:
            - create